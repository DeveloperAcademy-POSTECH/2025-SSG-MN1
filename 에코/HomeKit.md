>[!question]
>GQ1. HomeKitì€ ë¬´ì—‡ì¸ê°€.
>GQ2. HomeKitì˜ íŠ¹ì§•ì€ ë¬´ì—‡ì¸ê°€.
>GQ3. HomeKitì˜ ì‚¬ìš© ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?


## HomeKit: ì•ˆì „í•˜ê³  í†µí•©ëœ ìŠ¤ë§ˆíŠ¸í™ˆ í”„ë ˆì„ì›Œí¬

**HomeKit**ì€ Appleì´ ê°œë°œí•œ ìŠ¤ë§ˆíŠ¸í™ˆ í”Œë«í¼ìœ¼ë¡œ, ì‚¬ìš©ìê°€ iPhone, iPad, Mac, Apple Watch ë“± Apple ê¸°ê¸° ë° Sirië¥¼ í†µí•´ ì—¬ëŸ¬ ì œì¡°ì‚¬ì˜ ìŠ¤ë§ˆíŠ¸í™ˆ ì•¡ì„¸ì„œë¦¬(ì¡°ëª…, ì ê¸ˆì¥ì¹˜, ì˜¨ë„ ì¡°ì ˆê¸°, ì¹´ë©”ë¼ ë“±)ë¥¼ **í•˜ë‚˜ì˜ í†µí•©ëœ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê²Œ ì œì–´í•˜ê³  ê´€ë¦¬**í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

Appleì˜ ê³µì‹ ê°œë°œì ë¬¸ì„œì— ë”°ë¥´ë©´, HomeKitì€ íŠ¹ì • ì•±ì´ë‚˜ ì œí’ˆì´ ì•„ë‹Œ, ë‹¤ì–‘í•œ ìŠ¤ë§ˆíŠ¸í™ˆ ê¸°ê¸°ë“¤ì´ ì„œë¡œ ì›í™œí•˜ê²Œ í†µì‹ í•˜ê³  í˜‘ë ¥í•˜ë„ë¡ ë§Œë“œëŠ” ê¸°ë°˜ ê¸°ìˆ ì…ë‹ˆë‹¤. í•µì‹¬ ëª©í‘œëŠ” ë³µì¡í•œ ìŠ¤ë§ˆíŠ¸í™ˆ í™˜ê²½ì„ ì‚¬ìš©ì ì¤‘ì‹¬ìœ¼ë¡œ ë‹¨ìˆœí™”í•˜ê³ , ê°•ë ¥í•œ ë³´ì•ˆê³¼ ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ë³´ì¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

### HomeKitì˜ ì£¼ìš” íŠ¹ì§•

ê³µì‹ ë¬¸ì„œì—ì„œ ê°•ì¡°í•˜ëŠ” HomeKitì˜ í•µì‹¬ì ì¸ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- **í†µí•©ëœ ì œì–´:** ì‚¬ìš©ìëŠ” Appleì˜ ê¸°ë³¸ ì•±ì¸ **'í™ˆ(Home)' ì•±** í•˜ë‚˜ë¡œ ì—¬ëŸ¬ ë¸Œëœë“œì˜ ëª¨ë“  HomeKit ì§€ì› ê¸°ê¸°ë¥¼ ì¶”ê°€í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ê¸° ë‹¤ë¥¸ ì œì¡°ì‚¬ì˜ ì•±ì„ ì¼ì¼ì´ ì‹¤í–‰í•  í•„ìš” ì—†ì´, 'í™ˆ' ì•±ì—ì„œ ëª¨ë“  ê¸°ê¸°ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **Siri ìŒì„± ì œì–´:** "Siriì•¼, ë‚˜ ì§‘ì— ì™”ì–´" ë˜ëŠ” "Siriì•¼, ì•ˆë°© ë¶ˆ êº¼ì¤˜"ì™€ ê°™ì€ ê°„ë‹¨í•œ ìŒì„± ëª…ë ¹ìœ¼ë¡œ ë“±ë¡ëœ ê¸°ê¸°ë“¤ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ë™ì‘ì„ ë¬¶ì–´ 'ì¥ë©´(Scene)'ìœ¼ë¡œ ì„¤ì •í•˜ë©´, "ì˜ ì‹œê°„ì´ì•¼" í•œë§ˆë””ë¡œ ëª¨ë“  ì¡°ëª…ì„ ë„ê³ , ë¬¸ì„ ì ê·¸ê³ , ì˜¨ë„ë¥¼ ì¡°ì ˆí•˜ëŠ” ë“±ì˜ ë³µí•©ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **ê°•ë ¥í•œ ë³´ì•ˆ ë° ê°œì¸ì •ë³´ ë³´í˜¸:** HomeKitì˜ ê°€ì¥ í° íŠ¹ì§• ì¤‘ í•˜ë‚˜ëŠ” ë³´ì•ˆì…ë‹ˆë‹¤. ëª¨ë“  í†µì‹ ì€ ì¢…ë‹¨ê°„ ì•”í˜¸í™”(end-to-end encryption)ë¥¼ í†µí•´ ë³´í˜¸ë©ë‹ˆë‹¤. ì´ëŠ” Appleì„ í¬í•¨í•œ ê·¸ ëˆ„êµ¬ë„ ì‚¬ìš©ìì˜ ì§‘ì—ì„œ ì˜¤ê°€ëŠ” ë°ì´í„°ë¥¼ ë“¤ì—¬ë‹¤ë³¼ ìˆ˜ ì—†ìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. íŠ¹íˆ **'HomeKit ë³´ì•ˆ ë¹„ë””ì˜¤(HomeKit Secure Video)'** ê¸°ëŠ¥ì€ ë³´ì•ˆ ì¹´ë©”ë¼ì˜ ì˜ìƒì„ ì‚¬ìš©ìì˜ iCloudì— ì•”í˜¸í™”í•˜ì—¬ ì €ì¥í•˜ê¸° ì „ì—, HomePodì´ë‚˜ Apple TV ê°™ì€ í™ˆ í—ˆë¸Œì—ì„œ ë¨¼ì € ë¶„ì„í•˜ì—¬ ê°œì¸ì •ë³´ë¥¼ ìµœëŒ€í•œ ë³´í˜¸í•©ë‹ˆë‹¤.
    
- **ìë™í™”:** ì‚¬ìš©ìì˜ ìœ„ì¹˜, ì‹œê°„, íŠ¹ì • ì„¼ì„œì˜ ê°ì§€ ë“± ë‹¤ì–‘í•œ ì¡°ê±´ì— ë”°ë¼ ê¸°ê¸°ë“¤ì´ ìë™ìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ ì§‘ì„ ë– ë‚˜ë©´ ìë™ìœ¼ë¡œ ëª¨ë“  ì¡°ëª…ì´ êº¼ì§€ê³  ë¬¸ì´ ì ê¸°ë„ë¡ ì„¤ì •í•˜ê±°ë‚˜, ë§¤ì¼ ì•„ì¹¨ 7ì‹œì— ì°½ë¬¸ ë¸”ë¼ì¸ë“œê°€ ì—´ë¦¬ë„ë¡ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **í™ˆ í—ˆë¸Œ(Home Hub):** HomePod, HomePod mini ë˜ëŠ” Apple TVë¥¼ í™ˆ í—ˆë¸Œë¡œ ì„¤ì •í•˜ë©´, ì‚¬ìš©ìê°€ ì§‘ ë°–ì— ìˆì„ ë•Œë„ ì›ê²©ìœ¼ë¡œ ì•¡ì„¸ì„œë¦¬ë¥¼ ì œì–´í•˜ê±°ë‚˜ ìë™í™” ê¸°ëŠ¥ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í™ˆ í—ˆë¸ŒëŠ” ì§‘ ì•ˆì—ì„œ HomeKit ì•¡ì„¸ì„œë¦¬ë“¤ê³¼ ì•ˆì „í•˜ê²Œ í†µì‹ í•˜ëŠ” ì¤‘ì‹¬ì  ì—­í• ì„ í•©ë‹ˆë‹¤.
    

### ê°œë°œìì™€ ì œì¡°ì‚¬ë¥¼ ìœ„í•œ ìƒíƒœê³„

- **HomeKit í”„ë ˆì„ì›Œí¬:** ì•± ê°œë°œìë“¤ì€ HomeKit í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ HomeKitê³¼ ì—°ë™ë˜ëŠ” ì•±ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ê¸°ê¸°ë¥¼ ì„¤ì •í•˜ê³ , ì œì–´í•˜ë©°, ì»¤ìŠ¤í…€ ê¸°ëŠ¥ì„ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **MFi í”„ë¡œê·¸ë¨:** HomeKit ì•¡ì„¸ì„œë¦¬ë¥¼ ìƒì—…ì ìœ¼ë¡œ ì œì¡°í•˜ê³  íŒë§¤í•˜ë ¤ëŠ” íšŒì‚¬ëŠ” Appleì˜ **MFi(Made for iPhone/iPad/etc.) ì¸ì¦ í”„ë¡œê·¸ë¨**ì— ì°¸ì—¬í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ ì œí’ˆì´ Appleì˜ ì„±ëŠ¥ ë° ë³´ì•ˆ ê¸°ì¤€ì„ ì¶©ì¡±í•¨ì„ ë³´ì¥í•©ë‹ˆë‹¤.
    
![[ìŠ¤í¬ë¦°ìƒ· 2025-07-15 ì˜¤ì „ 7.32.30.png]]
![[ìŠ¤í¬ë¦°ìƒ· 2025-07-15 ì˜¤ì „ 7.33.16.png]]

```swift
import HomeKit

// HomeKitì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
class HomeKitController: NSObject, HMHomeManagerDelegate {

    // 1. HomeKit ì„¤ì • ë° ê¶Œí•œ ê´€ë¦¬
    private let homeManager = HMHomeManager()

    override init() {
        super.init()
        // HomeKit ë°ì´í„° ë³€ê²½ì„ ê°ì§€í•˜ê¸° ìœ„í•´ delegateë¥¼ selfë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
        homeManager.delegate = self
    }

    // HomeKit ë°ì´í„° ë¡œë”©ì´ ì™„ë£Œë˜ë©´ ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
    func homeManagerDidUpdateHomes(_ manager: HMHomeManager) {
        print("ğŸ  HomeKit ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ!")
        // ì˜ˆì‹œ: ë°ì´í„°ê°€ ì¤€ë¹„ë˜ë©´ ìë™ìœ¼ë¡œ ì¡°ëª… ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
        checkLightStatus()
    }

    // --- í—¬í¼ í•¨ìˆ˜: íŠ¹ì • ì¥ë¹„ì™€ ê¸°ëŠ¥(íŠ¹ì„±) ì°¾ê¸° ---

    /// "ê±°ì‹¤ ì¡°ëª…"ì„ ì°¾ì•„ì£¼ëŠ” ë‚´ë¶€ í•¨ìˆ˜
    private func findLivingRoomLight() -> HMAccessory? {
        // 2. ê¸°ë³¸ ì§‘(Primary Home) ì ‘ê·¼
        guard let primaryHome = homeManager.primaryHome else {
            print("ì˜¤ë¥˜: ê¸°ë³¸ ì§‘ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
            return nil
        }
        
        // 3. ì¥ë¹„(Accessory) ê²€ìƒ‰
        guard let lightAccessory = primaryHome.accessories.first(where: { $0.name == "ê±°ì‹¤ ì¡°ëª…" }) else {
            print("ì˜¤ë¥˜: 'ê±°ì‹¤ ì¡°ëª…'ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
            return nil
        }
        
        // ì¥ë¹„ê°€ í˜„ì¬ ì—°ê²° ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
        guard lightAccessory.isReachable else {
            print("ì˜¤ë¥˜: 'ê±°ì‹¤ ì¡°ëª…'ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
            return nil
        }
        
        return lightAccessory
    }

    /// ì¡°ëª…ì˜ ì „ì› ê¸°ëŠ¥(íŠ¹ì„±)ì„ ì°¾ì•„ì£¼ëŠ” ë‚´ë¶€ í•¨ìˆ˜
    private func findPowerCharacteristic() -> HMCharacteristic? {
        guard let light = findLivingRoomLight() else { return nil }

        // 4. ì¥ë¹„ ì œì–´ (íŠ¹ì„± ì°¾ê¸°)
        // ì¡°ëª… ì„œë¹„ìŠ¤(Lightbulb)ì—ì„œ ì „ì› ìƒíƒœ(PowerState) íŠ¹ì„±ì„ ì°¾ìŠµë‹ˆë‹¤.
        return light.services
            .first(where: { $0.serviceType == HMServiceTypeLightbulb })?
            .characteristics.first(where: { $0.characteristicType == HMCharacteristicTypePowerState })
    }
    
    // --- ì‹¤ì œ ì‚¬ìš© í•¨ìˆ˜ ---

    /// ì¡°ëª…ì˜ í˜„ì¬ ì „ì› ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
    func checkLightStatus() {
        guard let powerState = findPowerCharacteristic() else { return }
        
        // íŠ¹ì„± ê°’ ì½ê¸°(Read)
        powerState.readValue { error in
            if let error = error {
                print("ìƒíƒœ ì½ê¸° ì˜¤ë¥˜: \(error.localizedDescription)")
                return
            }
            
            // ì½ì–´ì˜¨ ê°’(Bool)ì„ í™•ì¸í•©ë‹ˆë‹¤.
            if let isOn = powerState.value as? Bool {
                print("ğŸ’¡ í˜„ì¬ ì¡°ëª… ìƒíƒœ: \(isOn ? "ì¼œì§" : "êº¼ì§")")
            }
        }
    }

    /// ì¡°ëª… ì „ì›ì„ ì¼œëŠ” í•¨ìˆ˜
    func turnOnLight() {
        guard let powerState = findPowerCharacteristic() else { return }
        
        // íŠ¹ì„± ê°’ ì“°ê¸°(Write)
        powerState.writeValue(true) { error in
            if let error = error {
                print("ì¡°ëª… ì¼œê¸° ì˜¤ë¥˜: \(error.localizedDescription)")
            } else {
                print("âœ… ì¡°ëª…ì„ ì¼°ìŠµë‹ˆë‹¤.")
            }
        }
    }

    /// ì¡°ëª… ì „ì›ì„ ë„ëŠ” í•¨ìˆ˜
    func turnOffLight() {
        guard let powerState = findPowerCharacteristic() else { return }
        
        // íŠ¹ì„± ê°’ ì“°ê¸°(Write)
        powerState.writeValue(false) { error in
            if let error = error {
                print("ì¡°ëª… ë„ê¸° ì˜¤ë¥˜: \(error.localizedDescription)")
            } else {
                print("âœ… ì¡°ëª…ì„ ê»ìŠµë‹ˆë‹¤.")
            }
        }
    }
}
```

## References
- Appleì˜ ê³µì‹ ë¬¸ì„œ & ChatGPT